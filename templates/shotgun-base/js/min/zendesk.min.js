function enableActionsMenu(){if("anonymous"==HelpCenter.user.role)$('<div id="user" class="user-info dropdown"><div class="btn dropdown-toggle actions-menu" role="button"><span id="user-name">'+i18n("actions","en-us")+"</span></div></div>").prependTo(".user-nav-table"),$('<div id="user-dropdown" class="dropdown-menu dropdown-menu-end dropdown-menu-caret" aria-expanded="false"><div id="user-menu"></div></div>').appendTo(".user-nav-table"),(n=$(getNewRequestLink())).appendTo("#user-menu"),n.attr("role","menuitem"),$(".login").appendTo("#user-menu"),$(".login").attr("role","menuitem"),$("#user-name").css("padding-right","5px"),$(".user-info").css("height","26px"),$(".user-info").css("padding","4px 4px 6px 6px"),$(".user-info").click(function(){var e=$("#user-dropdown");"true"===e.attr("aria-expanded")?e.attr("aria-expanded","false"):e.attr("aria-expanded","true")});else{var e=$(getContributionsLink());e.prependTo("#user-menu"),e.attr("role","menuitem"),e.attr("id","my-contribution-settings"),e.text(i18n("my-contributions","en-us"));var t=$(getFollowingLink());t.prependTo("#user-menu"),t.attr("role","menuitem"),t.attr("id","my-follow-settings"),t.text(i18n("my-follow-settings","en-us")),$(".my-activities").prependTo("#user-menu");var n=$(getNewRequestLink());n.prependTo("#user-menu"),n.attr("role","menuitem"),n.attr("id","submit-a-request")}if($(".submit-a-request").text(i18n("submit-a-request","en-us")),$(".login").text(i18n("sign-in","en-us")),$(".my-activities").text(i18n("my-requests","en-us")),$(".post-subscribe").text(i18n("follow-updates","en-us")),$(".article-subscribe").text(i18n("follow-updates","en-us")),["request-list","request"].indexOf(getPageType())>=0&&(""===$(".activities-request-new-btn").text().trim()?$(".activities-request-new").hide():$(".activities-request-new-btn").text(i18n("submit-a-new-request","en-us")),HelpCenter.user.organizations.length>0)){var i='<li><a href="requests/organization">'+i18n("organization-requests","en-us")+"</a></li>";$(i).appendTo(".activities-request-groups")}}function collapseAllCategoryMenus(e){$(".user-guide-nav-expand").each(function(){"-"===$(this).attr("data-toggle-icon")&&$(e).html().trim()!==$(this).html().trim()&&($(this).parent().find(".article-listing").each(function(){$(this).slideToggle()}),$(this).attr("data-toggle-icon","+"))})}function collapseAllSectionMenus(e){$(".nav-section-title").each(function(){"-"===$(this).attr("data-toggle-icon")&&$(e).html().trim()!==$(this).html().trim()&&($(this).siblings().each(function(){$(this).slideToggle()}),$(this).attr("data-toggle-icon","+"))})}function initializeExpandCollapse(e){var t=$(".article-title");if(e.find(".article-listing").hide(),$(".user-guide-nav-expand").attr("data-toggle-icon","+"),e.find(".nav-children").hide(),$(".nav-header").attr("data-toggle-icon","-"),$(".nav-section-title").attr("data-toggle-icon","+"),1===t.length){var n=!1;t=t.text().trim(),specialSectionTypes().indexOf(t)>=0&&(n=!0),!1===n&&$(".nav-article").each(function(){$(this).text().trim()===t&&($(this).parents(".nav-children").show(),$(this).parents(".nav-children").siblings(".nav-section-title").attr("data-toggle-icon","-"),$(this).addClass("active-article"),$(this).closest(".article-listing").show(),$(this).closest(".article-listing").parent().find(".user-guide-nav-expand").attr("data-toggle-icon","-"),n=!0)}),!1===n&&$(".nav-section-title").each(function(){$(this).text().trim()===t&&($(this).parent().find(".nav-children").show(),$(this).attr("data-toggle-icon","-"),$(this).closest(".article-listing").show(),$(this).closest(".article-listing").parent().find(".user-guide-nav-expand").attr("data-toggle-icon","-"),n=!0)}),!1===n&&$(".user-guide-nav-title").each(function(){$(this).text().trim()===t&&($(this).parent().find(".article-listing").show(),$(this).parent().find(".user-guide-nav-expand").attr("data-toggle-icon","-"),n=!0)})}$(".user-guide-nav-expand").click(function(){collapseAllCategoryMenus(this),$(this).parent().find(".article-listing").each(function(){$(this).slideToggle()}),"-"===$(this).attr("data-toggle-icon")?$(this).attr("data-toggle-icon","+"):$(this).attr("data-toggle-icon","-")}),$(".article-listing .nav-header, .nav-section-title").click(function(){collapseAllSectionMenus(this),$(this).siblings().each(function(){$(this).slideToggle()}),"-"===$(this).attr("data-toggle-icon")?$(this).attr("data-toggle-icon","+"):$(this).attr("data-toggle-icon","-")})}function checkArticleType(e){var t=$("#article-type");"Article"==t.text().trim()&&specialSectionTypes().indexOf(e.trim())>=0&&t.text(e.trim())}function specialSectionTypes(){return["Tutorials","FAQ","Videos"]}function disableArticleComments(){var e=$(".no-comments"),t=$(".article-comments");null!=e&&e.length>0&&null!=t&&t.length>0&&(t.css("display","none"),e.css("display","none"))}function loadSectionMenus(e){void 0===e&&(e="en-us");var t=$(".user-guide-nav-contents");if(null!=t&&t.length>0){var n=getCategoryId(),i=getProductMenu(n);""===i?($(".article-nav").css("display","none"),$(".article-column").css("padding-left","0px")):($(".product-selector").append(i),renderCachedTree(t,n,e))}}function userTags(){return user_tags=HelpCenter.user.tags,HelpCenter.user.organizations.forEach(function(e){e.tags.forEach(function(e){user_tags.push(e)})}),user_tags.filter(function(e,t,n){return n.indexOf(e)==t})}function segmentTags(){var e={},t={};return $.ajax({url:"/api/v2/help_center/user_segments.json",async:!1,success:function(n){(e=n.user_segments).forEach(function(e){t[e.id]=e.tags})}}),t}function userCanSeeSection(e){return user_tags=userTags(),"anonymous"==HelpCenter.user.role&&(user_tags=[]),void 0!=e.user_segment_id&&(section_tags=segmentTags()[e.id],void 0!=section_tags&&section_tags.forEach(function(e){if(!user_tags.includes(e))return!1})),!0}function sortedIds(e){if(ordered={},null!=e){unordered=Object.keys(e);for(var t=0;t<unordered.length;t++)ordered[e[unordered[t]].position]=unordered[t]}return ordered}function renderCachedTree(e,t,n){var i=getProductCategories(getProductMap()[t]);url="https://s3-us-west-2.amazonaws.com/shotgun-help-center/zd-menu-cache."+n+".json",$.getJSON(url,function(t){for(var n="",s=0;s<i.length;s++)if(t.hasOwnProperty(i[s])){var a=$('<a class="user-guide-nav-title user-guide-nav-expand">'+t[i[s]].name+"</a>"),r=$('<div class="article-listing"></div>');sectionIds=sortedIds(t[i[s]].sections),Object.keys(sectionIds).forEach(function(e){if(section=t[i[s]].sections[sectionIds[e]],section.id=e,userCanSeeSection(section))if(specialSectionTypes().indexOf(section.name)>=0)n+='<a class="user-guide-nav-title promoted-section" href="'+section.html_url+'">'+section.name+"</a>";else{var a=$('<div class="nav-section-title nav-title">'+section.name+"</div>"),o=$('<ul class="nav-children"></ul>');articleIds=sortedIds(section.articles),Object.keys(articleIds).forEach(function(e){article=section.articles[articleIds[e]],article_html=$('<li><a class="nav-article" href="'+article.html_url+'">'+article.name+"</a></li>"),o.append(article_html)}),section_html=$("<div></div>").append([a,o]),r.append(section_html)}}),a=a.add(r),$(e).append($("<div></div>").append(a))}$(e).append($(n)),initializeExpandCollapse(e)})}function invalidateIndexes(){window.localStorage.setItem("articleIndex",JSON.stringify({})),window.localStorage.setItem("sectionIndex",JSON.stringify({}));var e=getCategoryIndexName();window.sessionStorage.setItem(e,JSON.stringify({}))}function getCategoryMap(){return{202726378:"Shotgun User Guide",202866127:"Shotgun Admin Guide",115000022673:"Shotgun Developer Guide",202981388:"Shotgun Troubleshooting",115000024774:"Release Notes",114093982514:"RV Overview",202726418:"RV User Guide",202726408:"Studio Tools",115000020413:"Shotgun Enterprise - Docker",114093970474:"Shotgun Enterprise"}}function getCategoryId(){var e=getPageType(),t=getPageId();if("category"===e)return t;var n=void 0!==window.localStorage,i=0,s=0;if("section"===e&&(s=t),"article"===e){var a={};if(n&&null!==window.localStorage.getItem("articleIndex")&&(a=JSON.parse(window.localStorage.getItem("articleIndex"))).hasOwnProperty(t.toString()))return a[t.toString()];var r="/api/v2/help_center/articles/"+t;$.ajax({url:r,async:!1,success:function(e){s=e.article.section_id}})}if(0!==s){var o={};if(n&&null!==window.localStorage.getItem("sectionIndex")&&(o=JSON.parse(window.localStorage.getItem("sectionIndex"))).hasOwnProperty(s.toString()))return"article"===e&&(a[t.toString()]=o[s.toString()],window.localStorage.setItem("articleIndex",JSON.stringify(a))),o[s.toString()];var c="/api/v2/help_center/sections/"+s;$.ajax({url:c,async:!1,success:function(e){i=e.section.category_id}}),"article"===e&&(a[t.toString()]=i,window.localStorage.setItem("articleIndex",JSON.stringify(a))),o[s.toString()]=i,window.localStorage.setItem("sectionIndex",JSON.stringify(o))}return i}function createCategoryIndex(){var e=[],t=getCategoryIndexName();return $.get("/api/v2/help_center/categories.json").then(function(n){n.categories.forEach(function(t){e.push(t.id)}),window.sessionStorage.setItem(t,JSON.stringify(e))}),e}function getCategoryIndexName(){return"categoryIndex-"+HelpCenter.user.role}function getCategoryIndex(){var e=void 0!==window.sessionStorage,t=getCategoryIndexName();return!1!==e&&null!==window.sessionStorage.getItem(t)&&"{}"!==window.sessionStorage.getItem(t)?JSON.parse(window.sessionStorage.getItem(t)):createCategoryIndex()}function validateCategoryAccess(e){return categoryIndex=getCategoryIndex(),categoryIndex.indexOf(e)>=0}function getProductCategories(e){var t={},n=getProductMap();for(var s in n)n.hasOwnProperty(s)&&(t.hasOwnProperty(n[s])?t[n[s]].push(s):t[n[s]]=[s]);var a=[],r=getCategoryIndex();for(i=0;i<r.length;i++)t[e].indexOf(r[i].toString())>=0&&a.push(r[i].toString());return a!=[]?a:t[e]}function toggleCategoryTree(){$(".category-tree").on("click","h2 a, h3 a",function(){return $(this).parent().nextAll().toggle(),!1})}function formatToolkitTableOfContents(){$("h4:contains('Table of Contents:')").parent().children("p").css("margin","0")}function enableCommenting(){var e=$(".answer-body textarea"),t=$(".answer-form-controls"),n=$(".comment-container textarea"),i=$(".comment-form-controls");e.one("focus",function(){t.show()}),n.one("focus",function(){i.show()}),""!==n.val()&&i.show(),""!==e.val()&&t.show()}function setOrganizationRequest(){$("#request-organization select").on("change",function(){this.form.submit()})}function i18n(e,t){return translations={actions:{"en-us":"Actions"},"find-anything":{"en-us":"Find anything (like tutorials, time logs, or task templates)"},"follow-updates":{"en-us":"Follow Updates"},"my-contributions":{"en-us":"My Contributions"},"my-follow-settings":{"en-us":"My Follow Settings"},"my-requests":{"en-us":"My Requests"},"organization-requests":{"en-us":"Organization Requests"},"search-requests":{"en-us":"Search Requests..."},"sign-in":{"en-us":"Sign In"},"submit-a-new-request":{"en-us":"Submit A New Request"},"submit-a-request":{"en-us":"Submit A Request"}},translations[e][t]}function getProductMap(){return{202726378:"Shotgun",202866127:"Shotgun",115000022673:"Shotgun",202981388:"Shotgun",115000024774:"Shotgun",114093982514:"RV",202726418:"RV",202726408:"Studio",115000020413:"Shotgun Enterprise",114093970474:"Shotgun Enterprise"}}function getSelectedProduct(e){var t=getProductMap();return t.hasOwnProperty(e.toString())?t[e.toString()]:""}function getProductMenuIndexName(){return"productMenu-"+HelpCenter.user.role}function getProductMenu(e){var t=void 0!==window.sessionStorage;idxName=getProductMenuIndexName(),t&&null!==window.sessionStorage.getItem(idxName)&&$(".product-selector").append(JSON.parse(window.localStorage.getItem(idxName)));var n=getProductMap(),i=getSelectedProduct(e);if(""===i)return i;var s=["202726378","202726418"];validateCategoryAccess("202726408")&&s.push("202726408"),validateCategoryAccess("114093970474")&&s.push("114093970474"),menuHtml='<a class="dropdown-toggle product-selected-item">'+i+"</a>",menuHtml+='<span class="dropdown-menu dropdown-menu-end product-items" role="menu">';for(var a=0;a<s.length;a++)n.hasOwnProperty(s[a])&&(productName=n[s[a]],menuHtml+='<a href="https://support.shotgunsoftware.com/hc/en-us/categories/'+s[a]+'" rel="nofollow" role="menuitem">'+productName+"</a>");return menuHtml+="</span>",window.sessionStorage.setItem(idxName,JSON.stringify(menuHtml)),menuHtml}function search(){window.location.search=$.param({query:$("#quick-search").val(),status:$("#request-status-select").val(),organization_id:$("#request-organization-select").val()})}function setSearchPlaceholder(){$(".st-default-search-input").attr("placeholder",i18n("find-anything","en-us"))}function setRequestsPlaceholder(){"request-list"===getPageType()&&$(".requests-search").attr("placeholder",i18n("search-requests","en-us"))}function enableSearchBar(){$("#request-status-select, #request-organization-select").on("change",function(){search()}),$("#quick-search").on("keypress",function(e){13===e.which&&search()}),$("#user-nav-search-icon").on("click",searchCallback),$(document).keyup(function(e){27===e.keyCode&&searchCallback()})}function quickFocus(e){e.focus()}function searchCallback(){var e=$("#user-nav-search-container");$(".header-inner").css("width");"none"===e.css("display")?($("#user-nav-search-icon i").css("color","#323131"),$("#user-nav-search-icon a").css("border-radius","5px 0px 0px 5px"),$(".docs-nav").css("display","none"),$(".search-table").css("width","100%"),e.css("display","table-cell"),$("#user-nav-search").animate({width:"100%"},250),quickFocus($("#user-nav-search-input"))):($("#user-nav-search-icon i").css("color","#ffffff"),$("#user-nav-search-icon a").css("border-radius","5px"),e.css("display","none"),$(".docs-nav").css("display","table-cell"),$(".search-table").css("width","0"),$("#user-nav-search").css("width","36px"))}function rndBackgroundImgBox(){var e=["outside-desk-blur.jpg","outside-desk-blur-2.jpg"];return"url('//p6.zdassets.com/hc/theme_assets/7538/1405/"+e[Math.floor(Math.random()*e.length)]+"')"}function setBackgroundImgBox(){var e=$(".background-img-box");null!=e&&e.length>0&&($(".article-title").css("display","none"),$(".breadcrumbs").css("display","none"),e.css("background-image",rndBackgroundImgBox()),e.prependTo($("main")))}function enableSharing(){$(".share a").click(function(e){e.preventDefault(),window.open(this.href,"","height = 500, width = 500")}),$(".share-label").on("click",function(e){e.stopPropagation();var t="true"==this.getAttribute("aria-selected");this.setAttribute("aria-selected",!t),$(".share-label").not(this).attr("aria-selected","false")}),$(document).on("click",function(){$(".share-label").attr("aria-selected","false")})}