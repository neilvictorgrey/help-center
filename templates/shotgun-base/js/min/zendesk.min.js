function enableActionsMenu(){if("anonymous"==HelpCenter.user.role)$('<div id="user" class="user-info dropdown"><div class="btn dropdown-toggle actions-menu" role="button"><span id="user-name">Actions</span></div></div>').prependTo(".user-nav-table"),$('<div id="user-dropdown" class="dropdown-menu dropdown-menu-end dropdown-menu-caret" aria-expanded="false"><div id="user-menu"></div></div>').appendTo(".user-nav-table"),(n=$(getNewRequestLink())).appendTo("#user-menu"),n.attr("role","menuitem"),$(".login").appendTo("#user-menu"),$(".login").attr("role","menuitem"),$("#user-name").css("padding-right","5px"),$(".user-info").css("height","26px"),$(".user-info").css("padding","4px 4px 6px 6px"),$(".user-info").click(function(){var e=$("#user-dropdown");"true"===e.attr("aria-expanded")?e.attr("aria-expanded","false"):e.attr("aria-expanded","true")});else{var e=$(getContributionsLink());e.prependTo("#user-menu"),e.attr("role","menuitem"),e.attr("id","my-contribution-settings"),e.text("My Contributions");var t=$(getFollowingLink());t.prependTo("#user-menu"),t.attr("role","menuitem"),t.attr("id","my-follow-settings"),t.text("My Follow Settings"),$(".my-activities").prependTo("#user-menu");var n=$(getNewRequestLink());n.prependTo("#user-menu"),n.attr("role","menuitem"),n.attr("id","submit-a-request")}$(".submit-a-request").text("Submit A Request"),$(".login").text("Sign In"),$(".my-activities").text("My Requests"),$(".post-subscribe").text("Follow Updates"),$(".article-subscribe").text("Follow Updates"),["request-list","request"].indexOf(getPageType())>=0&&(""===$(".activities-request-new-btn").text().trim()?$(".activities-request-new").hide():$(".activities-request-new-btn").text("Submit A New Request"),HelpCenter.user.organizations.length>0&&$('<li><a href="/hc/en-us/requests/organization">Organization Requests</a></li>').appendTo(".activities-request-groups"))}function getTree(e){var t=$.Deferred(),n=void 0!==window.localStorage,i="navbar-sections-"+e;n&&null!==window.localStorage.getItem(i)&&t.resolve(JSON.parse(window.localStorage.getItem(i)));var a="/api/v2/help_center/categories/"+e+"/sections.json";return $.get(a).then(function(e){var a=[];e.sections.forEach(function(e){a.push({id:e.id,html_url:e.html_url,name:e.name})});var o=[];a.forEach(function(e){var t=$.get("/api/v2/help_center/sections/"+e.id+"/articles.json").then(function(t){var n=[];t.articles.forEach(function(e){n.push({id:e.id,html_url:e.html_url,name:e.name})}),e.articles=n});o.push(t)}),$.when.apply($,o).done(function(){n&&null===window.localStorage.getItem(i)&&t.resolve(a),n&&window.localStorage.setItem(i,JSON.stringify(a))})}),t}function collapseAllCategoryMenus(e){$(".user-guide-nav-expand").each(function(){"-"===$(this).attr("data-toggle-icon")&&$(e).html().trim()!==$(this).html().trim()&&($(this).parent().find(".article-listing").each(function(){$(this).slideToggle()}),$(this).attr("data-toggle-icon","+"))})}function collapseAllSectionMenus(e){$(".nav-section-title").each(function(){"-"===$(this).attr("data-toggle-icon")&&$(e).html().trim()!==$(this).html().trim()&&($(this).siblings().each(function(){$(this).slideToggle()}),$(this).attr("data-toggle-icon","+"))})}function initializeExpandCollapse(e){var t=$(".article-title");if(e.find(".article-listing").hide(),$(".user-guide-nav-expand").attr("data-toggle-icon","+"),e.find(".nav-children").hide(),$(".nav-header").attr("data-toggle-icon","-"),$(".nav-section-title").attr("data-toggle-icon","+"),1===t.length){var n=!1;t=t.html().trim(),specialSectionTypes().indexOf(t)>=0&&(n=!0),!1===n&&$(".nav-article").each(function(){$(this).html().trim()===t&&($(this).parents(".nav-children").show(),$(this).parents(".nav-children").siblings(".nav-section-title").attr("data-toggle-icon","-"),$(this).addClass("active-article"),$(this).closest(".article-listing").show(),$(this).closest(".article-listing").parent().find(".user-guide-nav-expand").attr("data-toggle-icon","-"),n=!0)}),!1===n&&$(".nav-section-title").each(function(){$(this).html().trim()===t&&($(this).parent().find(".nav-children").show(),$(this).attr("data-toggle-icon","-"),$(this).closest(".article-listing").show(),$(this).closest(".article-listing").parent().find(".user-guide-nav-expand").attr("data-toggle-icon","-"),n=!0)}),!1===n&&$(".user-guide-nav-title").each(function(){$(this).html().trim()===t&&($(this).parent().find(".article-listing").show(),$(this).parent().find(".user-guide-nav-expand").attr("data-toggle-icon","-"),n=!0)}),!1===n&&invalidateIndexes()}$(".user-guide-nav-expand").click(function(){collapseAllCategoryMenus(this),$(this).parent().find(".article-listing").each(function(){$(this).slideToggle()}),"-"===$(this).attr("data-toggle-icon")?$(this).attr("data-toggle-icon","+"):$(this).attr("data-toggle-icon","-")}),$(".article-listing .nav-header, .nav-section-title").click(function(){collapseAllSectionMenus(this),$(this).siblings().each(function(){$(this).slideToggle()}),"-"===$(this).attr("data-toggle-icon")?$(this).attr("data-toggle-icon","+"):$(this).attr("data-toggle-icon","-")})}function checkArticleType(e){var t=$("#article-type");"Article"==t.text().trim()&&specialSectionTypes().indexOf(e.trim())>=0&&t.text(e.trim())}function specialSectionTypes(){return["Tutorials","FAQ","Videos"]}function disableArticleComments(){var e=$(".no-comments"),t=$(".article-comments");null!=e&&e.length>0&&null!=t&&t.length>0&&(t.css("display","none"),e.css("display","none"))}function loadSectionMenus(){var e=$(".user-guide-nav-contents");if(null!=e&&e.length>0){var t=getCategoryId(),n=getProductMenu(t);""===n?($(".article-nav").css("display","none"),$(".article-column").css("padding-left","0px")):(void 0!==window.sessionStorage&&null===window.sessionStorage.getItem("categoryIndex")&&createCategoryIndex(),$(".product-selector").append(n),renderCachedTree(e,t))}}function userTags(){return user_tags=HelpCenter.user.tags,HelpCenter.user.organizations.forEach(function(e){e.tags.forEach(function(e){user_tags.push(e)})}),user_tags}function userCanSeeSection(e){return user_tags=userTags(),("anonymous"!=HelpCenter.user.role||"everybody"==e.viewable_by)&&(e.tags.forEach(function(e){if(!user_tags.includes(e))return!1}),!0)}function sortedIds(e){ordered={},unordered=Object.keys(e);for(var t=0;t<unordered.length;t++)ordered[e[unordered[t]].position]=unordered[t];return ordered}function renderCachedTree(e,t){var n=getProductCategories(getProductMap()[t]);url="https://s3-us-west-2.amazonaws.com/shotgun-help-center/zd-menu-cache.json",$.getJSON(url,function(t){for(var i="",a=0;a<n.length;a++){var o=$('<a class="user-guide-nav-title user-guide-nav-expand">'+getCategoryMap()[n[a]]+"</a>"),r=$('<div class="article-listing"></div>');sectionIds=sortedIds(t[n[a]].sections),Object.keys(sectionIds).forEach(function(e){if(section=t[n[a]].sections[sectionIds[e]],userCanSeeSection(section))if(specialSectionTypes().indexOf(section.name)>=0)i+='<a class="user-guide-nav-title promoted-section" href="'+section.html_url+'">'+section.name+"</a>";else{var o=$('<div class="nav-section-title nav-title">'+section.name+"</div>"),s=$('<ul class="nav-children"></ul>');articleIds=sortedIds(section.articles),Object.keys(articleIds).forEach(function(e){article=section.articles[articleIds[e]],article_html=$('<li><a class="nav-article" href="'+article.html_url+'">'+article.name+"</a></li>"),s.append(article_html)}),section_html=$("<div></div>").append([o,s]),r.append(section_html)}}),o=o.add(r),$(e).append($("<div></div>").append(o))}$(e).append($(i)),initializeExpandCollapse(e)})}function invalidateIndexes(){window.localStorage.setItem("articleIndex",JSON.stringify({})),window.localStorage.setItem("sectionIndex",JSON.stringify({})),window.sessionStorage.setItem("categoryIndex",JSON.stringify({}))}function getCategoryMap(){return{202726378:"Shotgun User Guide",202866127:"Shotgun Admin Guide",115000022673:"Shotgun Developer Guide",202981388:"Shotgun Troubleshooting",115000024774:"Release Notes",202726698:"Toolkit User Guide",202726398:"Toolkit Admin Guide",202726678:"Toolkit Developer Guide",202726668:"Toolkit Integrations",114093982514:"RV Overview",202726418:"RV User Guide",202726408:"Studio Tools",114093970474:"Shotgun Enterprise"}}function getCategoryId(){var e=getPageType(),t=getPageId();if("category"===e)return t;var n=void 0!==window.localStorage,i=0,a=0;if("section"===e&&(a=t),"article"===e){var o={};if(n&&null!==window.localStorage.getItem("articleIndex")&&(o=JSON.parse(window.localStorage.getItem("articleIndex"))).hasOwnProperty(t.toString()))return o[t.toString()];var r="/api/v2/help_center/articles/"+t;$.ajax({url:r,async:!1,success:function(e){a=e.article.section_id}})}if(0!==a){var s={};if(n&&null!==window.localStorage.getItem("sectionIndex")&&(s=JSON.parse(window.localStorage.getItem("sectionIndex"))).hasOwnProperty(a.toString()))return"article"===e&&(o[t.toString()]=s[a.toString()],window.localStorage.setItem("articleIndex",JSON.stringify(o))),s[a.toString()];var c="/api/v2/help_center/sections/"+a;$.ajax({url:c,async:!1,success:function(e){i=e.section.category_id}}),"article"===e&&(o[t.toString()]=i,window.localStorage.setItem("articleIndex",JSON.stringify(o))),s[a.toString()]=i,window.localStorage.setItem("sectionIndex",JSON.stringify(s))}return i}function createCategoryIndex(){var e=[];return $.get("/api/v2/help_center/categories.json").then(function(t){t.categories.forEach(function(t){e.push(t.id)}),window.sessionStorage.setItem("categoryIndex",JSON.stringify(e))}),e}function getCategoryIndex(){return!1!==(void 0!==window.sessionStorage)&&null!==window.sessionStorage.getItem("categoryIndex")&&"{}"!==window.sessionStorage.getItem("categoryIndex")?window.sessionStorage.getItem("categoryIndex"):createCategoryIndex()}function validateCategoryAccess(e){return categoryIndex=getCategoryIndex(),categoryIndex.indexOf(e)>=0}function getProductCategories(e){var t={},n=getProductMap();for(var a in n)n.hasOwnProperty(a)&&(t.hasOwnProperty(n[a])?t[n[a]].push(a):t[n[a]]=[a]);var o=[],r=[];for(r=void 0!==window.sessionStorage&&null!==window.sessionStorage.getItem("categoryIndex")&&"{}"!==window.sessionStorage.getItem("categoryIndex")?JSON.parse(window.sessionStorage.getItem("categoryIndex")):createCategoryIndex(),i=0;i<r.length;i++)t[e].indexOf(r[i].toString())>=0&&o.push(r[i].toString());return o!=[]?o:t[e]}function toggleCategoryTree(){$(".category-tree").on("click","h2 a, h3 a",function(){return $(this).parent().nextAll().toggle(),!1})}function formatToolkitTableOfContents(){$("h4:contains('Table of Contents:')").parent().children("p").css("margin","0")}function enableCommenting(){var e=$(".answer-body textarea"),t=$(".answer-form-controls"),n=$(".comment-container textarea"),i=$(".comment-form-controls");e.one("focus",function(){t.show()}),n.one("focus",function(){i.show()}),""!==n.val()&&i.show(),""!==e.val()&&t.show()}function setOrganizationRequest(){$("#request-organization select").on("change",function(){this.form.submit()})}function getProductMap(){return{202726378:"Shotgun",202866127:"Shotgun",115000022673:"Shotgun",202981388:"Shotgun",115000024774:"Shotgun",202726698:"Toolkit",202726398:"Toolkit",202726678:"Toolkit",202726668:"Toolkit",114093982514:"RV",202726418:"RV",202726408:"Studio",114093970474:"Shotgun Enterprise"}}function getSelectedProduct(e){var t=getProductMap();return t.hasOwnProperty(e.toString())?t[e.toString()]:""}function getProductMenu(e){void 0!==window.sessionStorage&&null!==window.sessionStorage.getItem("productMenu")&&$(".product-selector").append(JSON.parse(window.localStorage.getItem("productMenu")));var t=getProductMap(),n=getSelectedProduct(e);if(""===n)return n;var i=["202726378","202726418"];validateCategoryAccess("202726408")&&i.push("202726408"),validateCategoryAccess("114093970474")&&i.push("114093970474"),menuHtml='<a class="dropdown-toggle product-selected-item">'+n+"</a>",menuHtml+='<span class="dropdown-menu dropdown-menu-end product-items" role="menu">';for(var a=0;a<i.length;a++)t.hasOwnProperty(i[a])&&(productName=t[i[a]],menuHtml+='<a href="https://support.shotgunsoftware.com/hc/en-us/categories/'+i[a]+'" rel="nofollow" role="menuitem">'+productName+"</a>");return menuHtml+="</span>",window.sessionStorage.setItem("productMenu",JSON.stringify(menuHtml)),menuHtml}function getProductCategories(e){var t={},n=getProductMap();for(var a in n)n.hasOwnProperty(a)&&(t.hasOwnProperty(n[a])?t[n[a]].push(a):t[n[a]]=[a]);var o=[],r=[];for(r=void 0!==window.sessionStorage&&null!==window.sessionStorage.getItem("categoryIndex")&&"{}"!==window.sessionStorage.getItem("categoryIndex")?JSON.parse(window.sessionStorage.getItem("categoryIndex")):createCategoryIndex(),i=0;i<r.length;i++)t[e].indexOf(r[i].toString())>=0&&o.push(r[i].toString());return o!=[]?o:t[e]}function search(){window.location.search=$.param({query:$("#quick-search").val(),status:$("#request-status-select").val(),organization_id:$("#request-organization-select").val()})}function setSearchPlaceholder(){$(".st-default-search-input").attr("placeholder","Find anything (like tutorials, time logs, or task templates)")}function setRequestsPlaceholder(){"request-list"===getPageType()&&$(".requests-search").attr("placeholder","Search Requests...")}function enableSearchBar(){$("#request-status-select, #request-organization-select").on("change",function(){search()}),$("#quick-search").on("keypress",function(e){13===e.which&&search()}),$("#user-nav-search-icon").on("click",searchCallback),$(document).keyup(function(e){27===e.keyCode&&searchCallback()})}function quickFocus(e){e.focus()}function searchCallback(){var e=$("#user-nav-search-container");$(".header-inner").css("width");"none"===e.css("display")?($("#user-nav-search-icon i").css("color","#323131"),$("#user-nav-search-icon a").css("border-radius","5px 0px 0px 5px"),$(".docs-nav").css("display","none"),$(".search-table").css("width","100%"),e.css("display","table-cell"),$("#user-nav-search").animate({width:"100%"},250),quickFocus($("#user-nav-search-input"))):($("#user-nav-search-icon i").css("color","#ffffff"),$("#user-nav-search-icon a").css("border-radius","5px"),e.css("display","none"),$(".docs-nav").css("display","table-cell"),$(".search-table").css("width","0"),$("#user-nav-search").css("width","36px"))}function rndBackgroundImgBox(){var e=["outside-desk-blur.jpg","outside-desk-blur-2.jpg"];return"url('//p6.zdassets.com/hc/theme_assets/7538/1405/"+e[Math.floor(Math.random()*e.length)]+"')"}function setBackgroundImgBox(){var e=$(".background-img-box");null!=e&&e.length>0&&($(".article-title").css("display","none"),$(".breadcrumbs").css("display","none"),e.css("background-image",rndBackgroundImgBox()),e.prependTo($("main")))}function enableSharing(){$(".share a").click(function(e){e.preventDefault(),window.open(this.href,"","height = 500, width = 500")}),$(".share-label").on("click",function(e){e.stopPropagation();var t="true"==this.getAttribute("aria-selected");this.setAttribute("aria-selected",!t),$(".share-label").not(this).attr("aria-selected","false")}),$(document).on("click",function(){$(".share-label").attr("aria-selected","false")})}